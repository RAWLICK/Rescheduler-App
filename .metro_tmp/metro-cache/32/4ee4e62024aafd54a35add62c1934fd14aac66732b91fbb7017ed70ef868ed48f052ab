{"dependencies":[{"name":"./defaults.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":15,"index":71},"end":{"line":4,"column":43,"index":99}},{"start":{"line":4,"column":15,"index":71},"end":{"line":4,"column":43,"index":99}},{"start":{"line":4,"column":15,"index":71},"end":{"line":4,"column":43,"index":99}}],"key":"H68BbYxq2ibHFRyq4X7z7hT+3lc="}},{"name":"@motionone/utils","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":12,"index":27},"end":{"line":3,"column":39,"index":54}}],"key":"xckskIHee+cZzkqmegwsQoOgUg0="}},{"name":"./utils.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":14,"index":115},"end":{"line":5,"column":39,"index":140}}],"key":"rFBGZm4IepcG/464J6hcTvPam7s="}},{"name":"../utils/velocity.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":15,"index":227},"end":{"line":7,"column":50,"index":262}}],"key":"z9jldBJbneEXCbsmO3LBG0553Do="}},{"name":"../utils/has-reached-target.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":23,"index":165},"end":{"line":6,"column":68,"index":210}}],"key":"0DcrQh6h4mF5/PzRDcNZ/qK4hcM="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var spring = function spring() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$stiffness = _ref.stiffness,\n      stiffness = _ref$stiffness === void 0 ? _$$_REQUIRE(_dependencyMap[0], \"./defaults.cjs.js\").defaults.stiffness : _ref$stiffness,\n      _ref$damping = _ref.damping,\n      damping = _ref$damping === void 0 ? _$$_REQUIRE(_dependencyMap[0], \"./defaults.cjs.js\").defaults.damping : _ref$damping,\n      _ref$mass = _ref.mass,\n      mass = _ref$mass === void 0 ? _$$_REQUIRE(_dependencyMap[0], \"./defaults.cjs.js\").defaults.mass : _ref$mass,\n      _ref$from = _ref.from,\n      from = _ref$from === void 0 ? 0 : _ref$from,\n      _ref$to = _ref.to,\n      to = _ref$to === void 0 ? 1 : _ref$to,\n      _ref$velocity = _ref.velocity,\n      velocity$1 = _ref$velocity === void 0 ? 0.0 : _ref$velocity,\n      restSpeed = _ref.restSpeed,\n      restDistance = _ref.restDistance;\n    velocity$1 = velocity$1 ? _$$_REQUIRE(_dependencyMap[1], \"@motionone/utils\").time.s(velocity$1) : 0.0;\n    var state = {\n      done: false,\n      hasReachedTarget: false,\n      current: from,\n      target: to\n    };\n    var initialDelta = to - from;\n    var undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n    var dampingRatio = _$$_REQUIRE(_dependencyMap[2], \"./utils.cjs.js\").calcDampingRatio(stiffness, damping, mass);\n    var isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale ? 0.01 : 2);\n    restDistance || (restDistance = isGranularScale ? 0.005 : 0.5);\n    var resolveSpring;\n    if (dampingRatio < 1) {\n      var angularFreq = undampedAngularFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n      // Underdamped spring (bouncy)\n      resolveSpring = function resolveSpring(t) {\n        return to - Math.exp(-dampingRatio * undampedAngularFreq * t) * ((-velocity$1 + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq * Math.sin(angularFreq * t) + initialDelta * Math.cos(angularFreq * t));\n      };\n    } else {\n      // Critically damped spring\n      resolveSpring = function resolveSpring(t) {\n        return to - Math.exp(-undampedAngularFreq * t) * (initialDelta + (-velocity$1 + undampedAngularFreq * initialDelta) * t);\n      };\n    }\n    return function (t) {\n      state.current = resolveSpring(t);\n      var currentVelocity = t === 0 ? velocity$1 : _$$_REQUIRE(_dependencyMap[3], \"../utils/velocity.cjs.js\").calcGeneratorVelocity(resolveSpring, t, state.current);\n      var isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - state.current) <= restDistance;\n      state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n      state.hasReachedTarget = _$$_REQUIRE(_dependencyMap[4], \"../utils/has-reached-target.cjs.js\").hasReachedTarget(from, to, state.current);\n      return state;\n    };\n  };\n  exports.spring = spring;\n});","lineCount":57,"map":[[2,2,1,0],[2,14,1,12],[4,2,9,0],[4,6,9,6,"spring"],[4,12,9,12],[4,15,9,15],[4,24,9,6,"spring"],[4,30,9,12,"spring"],[4,31,9,12],[4,33,9,209],[5,4,9,209],[5,8,9,209,"_ref"],[5,12,9,209],[5,15,9,209,"arguments"],[5,24,9,209],[5,25,9,209,"length"],[5,31,9,209],[5,39,9,209,"arguments"],[5,48,9,209],[5,56,9,209,"undefined"],[5,65,9,209],[5,68,9,209,"arguments"],[5,77,9,209],[5,83,9,202],[5,84,9,203],[5,85,9,204],[6,6,9,204,"_ref$stiffness"],[6,20,9,204],[6,23,9,204,"_ref"],[6,27,9,204],[6,28,9,18,"stiffness"],[6,37,9,27],[7,6,9,18,"stiffness"],[7,15,9,27],[7,18,9,27,"_ref$stiffness"],[7,32,9,27],[7,46,9,30,"_$$_REQUIRE"],[7,57,9,30],[7,58,9,30,"_dependencyMap"],[7,72,9,30],[7,98,9,39,"defaults"],[7,106,9,47],[7,107,9,48,"stiffness"],[7,116,9,57],[7,119,9,57,"_ref$stiffness"],[7,133,9,57],[8,6,9,57,"_ref$damping"],[8,18,9,57],[8,21,9,57,"_ref"],[8,25,9,57],[8,26,9,59,"damping"],[8,33,9,66],[9,6,9,59,"damping"],[9,13,9,66],[9,16,9,66,"_ref$damping"],[9,28,9,66],[9,42,9,69,"_$$_REQUIRE"],[9,53,9,69],[9,54,9,69,"_dependencyMap"],[9,68,9,69],[9,94,9,78,"defaults"],[9,102,9,86],[9,103,9,87,"damping"],[9,110,9,94],[9,113,9,94,"_ref$damping"],[9,125,9,94],[10,6,9,94,"_ref$mass"],[10,15,9,94],[10,18,9,94,"_ref"],[10,22,9,94],[10,23,9,96,"mass"],[10,27,9,100],[11,6,9,96,"mass"],[11,10,9,100],[11,13,9,100,"_ref$mass"],[11,22,9,100],[11,36,9,103,"_$$_REQUIRE"],[11,47,9,103],[11,48,9,103,"_dependencyMap"],[11,62,9,103],[11,88,9,112,"defaults"],[11,96,9,120],[11,97,9,121,"mass"],[11,101,9,125],[11,104,9,125,"_ref$mass"],[11,113,9,125],[12,6,9,125,"_ref$from"],[12,15,9,125],[12,18,9,125,"_ref"],[12,22,9,125],[12,23,9,127,"from"],[12,27,9,131],[13,6,9,127,"from"],[13,10,9,131],[13,13,9,131,"_ref$from"],[13,22,9,131],[13,36,9,134],[13,37,9,135],[13,40,9,135,"_ref$from"],[13,49,9,135],[14,6,9,135,"_ref$to"],[14,13,9,135],[14,16,9,135,"_ref"],[14,20,9,135],[14,21,9,137,"to"],[14,23,9,139],[15,6,9,137,"to"],[15,8,9,139],[15,11,9,139,"_ref$to"],[15,18,9,139],[15,32,9,142],[15,33,9,143],[15,36,9,143,"_ref$to"],[15,43,9,143],[16,6,9,143,"_ref$velocity"],[16,19,9,143],[16,22,9,143,"_ref"],[16,26,9,143],[16,27,9,145,"velocity"],[16,35,9,153],[17,6,9,155,"velocity$1"],[17,16,9,165],[17,19,9,165,"_ref$velocity"],[17,32,9,165],[17,46,9,168],[17,49,9,171],[17,52,9,171,"_ref$velocity"],[17,65,9,171],[18,6,9,173,"restSpeed"],[18,15,9,182],[18,18,9,182,"_ref"],[18,22,9,182],[18,23,9,173,"restSpeed"],[18,32,9,182],[19,6,9,184,"restDistance"],[19,18,9,196],[19,21,9,196,"_ref"],[19,25,9,196],[19,26,9,184,"restDistance"],[19,38,9,196],[20,4,10,4,"velocity$1"],[20,14,10,14],[20,17,10,17,"velocity$1"],[20,27,10,27],[20,30,10,30,"_$$_REQUIRE"],[20,41,10,30],[20,42,10,30,"_dependencyMap"],[20,56,10,30],[20,81,10,36,"time"],[20,85,10,40],[20,86,10,41,"s"],[20,87,10,42],[20,88,10,43,"velocity$1"],[20,98,10,53],[20,99,10,54],[20,102,10,57],[20,105,10,60],[21,4,11,4],[21,8,11,10,"state"],[21,13,11,15],[21,16,11,18],[22,6,12,8,"done"],[22,10,12,12],[22,12,12,14],[22,17,12,19],[23,6,13,8,"hasReachedTarget"],[23,22,13,24],[23,24,13,26],[23,29,13,31],[24,6,14,8,"current"],[24,13,14,15],[24,15,14,17,"from"],[24,19,14,21],[25,6,15,8,"target"],[25,12,15,14],[25,14,15,16,"to"],[26,4,16,4],[26,5,16,5],[27,4,17,4],[27,8,17,10,"initialDelta"],[27,20,17,22],[27,23,17,25,"to"],[27,25,17,27],[27,28,17,30,"from"],[27,32,17,34],[28,4,18,4],[28,8,18,10,"undampedAngularFreq"],[28,27,18,29],[28,30,18,32,"Math"],[28,34,18,36],[28,35,18,37,"sqrt"],[28,39,18,41],[28,40,18,42,"stiffness"],[28,49,18,51],[28,52,18,54,"mass"],[28,56,18,58],[28,57,18,59],[28,60,18,62],[28,64,18,66],[29,4,19,4],[29,8,19,10,"dampingRatio"],[29,20,19,22],[29,23,19,25,"_$$_REQUIRE"],[29,34,19,25],[29,35,19,25,"_dependencyMap"],[29,49,19,25],[29,72,19,33,"calcDampingRatio"],[29,88,19,49],[29,89,19,50,"stiffness"],[29,98,19,59],[29,100,19,61,"damping"],[29,107,19,68],[29,109,19,70,"mass"],[29,113,19,74],[29,114,19,75],[30,4,20,4],[30,8,20,10,"isGranularScale"],[30,23,20,25],[30,26,20,28,"Math"],[30,30,20,32],[30,31,20,33,"abs"],[30,34,20,36],[30,35,20,37,"initialDelta"],[30,47,20,49],[30,48,20,50],[30,51,20,53],[30,52,20,54],[31,4,21,4,"restSpeed"],[31,13,21,13],[31,18,21,18,"restSpeed"],[31,27,21,27],[31,30,21,30,"isGranularScale"],[31,45,21,45],[31,48,21,48],[31,52,21,52],[31,55,21,55],[31,56,21,56],[31,57,21,57],[32,4,22,4,"restDistance"],[32,16,22,16],[32,21,22,21,"restDistance"],[32,33,22,33],[32,36,22,36,"isGranularScale"],[32,51,22,51],[32,54,22,54],[32,59,22,59],[32,62,22,62],[32,65,22,65],[32,66,22,66],[33,4,23,4],[33,8,23,8,"resolveSpring"],[33,21,23,21],[34,4,24,4],[34,8,24,8,"dampingRatio"],[34,20,24,20],[34,23,24,23],[34,24,24,24],[34,26,24,26],[35,6,25,8],[35,10,25,14,"angularFreq"],[35,21,25,25],[35,24,25,28,"undampedAngularFreq"],[35,43,25,47],[35,46,25,50,"Math"],[35,50,25,54],[35,51,25,55,"sqrt"],[35,55,25,59],[35,56,25,60],[35,57,25,61],[35,60,25,64,"dampingRatio"],[35,72,25,76],[35,75,25,79,"dampingRatio"],[35,87,25,91],[35,88,25,92],[36,6,26,8],[37,6,27,8,"resolveSpring"],[37,19,27,21],[37,22,27,24],[37,31,27,8,"resolveSpring"],[37,44,27,21,"resolveSpring"],[37,45,27,25,"t"],[37,46,27,26],[38,8,27,26],[38,15,27,31,"to"],[38,17,27,33],[38,20,28,12,"Math"],[38,24,28,16],[38,25,28,17,"exp"],[38,28,28,20],[38,29,28,21],[38,30,28,22,"dampingRatio"],[38,42,28,34],[38,45,28,37,"undampedAngularFreq"],[38,64,28,56],[38,67,28,59,"t"],[38,68,28,60],[38,69,28,61],[38,73,29,18],[38,74,29,19],[38,75,29,20,"velocity$1"],[38,85,29,30],[38,88,29,33,"dampingRatio"],[38,100,29,45],[38,103,29,48,"undampedAngularFreq"],[38,122,29,67],[38,125,29,70,"initialDelta"],[38,137,29,82],[38,141,30,20,"angularFreq"],[38,152,30,31],[38,155,31,20,"Math"],[38,159,31,24],[38,160,31,25,"sin"],[38,163,31,28],[38,164,31,29,"angularFreq"],[38,175,31,40],[38,178,31,43,"t"],[38,179,31,44],[38,180,31,45],[38,183,32,20,"initialDelta"],[38,195,32,32],[38,198,32,35,"Math"],[38,202,32,39],[38,203,32,40,"cos"],[38,206,32,43],[38,207,32,44,"angularFreq"],[38,218,32,55],[38,221,32,58,"t"],[38,222,32,59],[38,223,32,60],[38,224,32,61],[39,6,32,61],[40,4,33,4],[40,5,33,5],[40,11,34,9],[41,6,35,8],[42,6,36,8,"resolveSpring"],[42,19,36,21],[42,22,36,24],[42,31,36,8,"resolveSpring"],[42,44,36,21,"resolveSpring"],[42,45,36,25,"t"],[42,46,36,26],[42,48,36,31],[43,8,37,12],[43,15,37,20,"to"],[43,17,37,22],[43,20,38,16,"Math"],[43,24,38,20],[43,25,38,21,"exp"],[43,28,38,24],[43,29,38,25],[43,30,38,26,"undampedAngularFreq"],[43,49,38,45],[43,52,38,48,"t"],[43,53,38,49],[43,54,38,50],[43,58,39,21,"initialDelta"],[43,70,39,33],[43,73,39,36],[43,74,39,37],[43,75,39,38,"velocity$1"],[43,85,39,48],[43,88,39,51,"undampedAngularFreq"],[43,107,39,70],[43,110,39,73,"initialDelta"],[43,122,39,85],[43,126,39,89,"t"],[43,127,39,90],[43,128,39,91],[44,6,40,8],[44,7,40,9],[45,4,41,4],[46,4,42,4],[46,11,42,11],[46,21,42,12,"t"],[46,22,42,13],[46,24,42,18],[47,6,43,8,"state"],[47,11,43,13],[47,12,43,14,"current"],[47,19,43,21],[47,22,43,24,"resolveSpring"],[47,35,43,37],[47,36,43,38,"t"],[47,37,43,39],[47,38,43,40],[48,6,44,8],[48,10,44,14,"currentVelocity"],[48,25,44,29],[48,28,44,32,"t"],[48,29,44,33],[48,34,44,38],[48,35,44,39],[48,38,45,14,"velocity$1"],[48,48,45,24],[48,51,46,14,"_$$_REQUIRE"],[48,62,46,14],[48,63,46,14,"_dependencyMap"],[48,77,46,14],[48,110,46,23,"calcGeneratorVelocity"],[48,131,46,44],[48,132,46,45,"resolveSpring"],[48,145,46,58],[48,147,46,60,"t"],[48,148,46,61],[48,150,46,63,"state"],[48,155,46,68],[48,156,46,69,"current"],[48,163,46,76],[48,164,46,77],[49,6,47,8],[49,10,47,14,"isBelowVelocityThreshold"],[49,34,47,38],[49,37,47,41,"Math"],[49,41,47,45],[49,42,47,46,"abs"],[49,45,47,49],[49,46,47,50,"currentVelocity"],[49,61,47,65],[49,62,47,66],[49,66,47,70,"restSpeed"],[49,75,47,79],[50,6,48,8],[50,10,48,14,"isBelowDisplacementThreshold"],[50,38,48,42],[50,41,48,45,"Math"],[50,45,48,49],[50,46,48,50,"abs"],[50,49,48,53],[50,50,48,54,"to"],[50,52,48,56],[50,55,48,59,"state"],[50,60,48,64],[50,61,48,65,"current"],[50,68,48,72],[50,69,48,73],[50,73,48,77,"restDistance"],[50,85,48,89],[51,6,49,8,"state"],[51,11,49,13],[51,12,49,14,"done"],[51,16,49,18],[51,19,49,21,"isBelowVelocityThreshold"],[51,43,49,45],[51,47,49,49,"isBelowDisplacementThreshold"],[51,75,49,77],[52,6,50,8,"state"],[52,11,50,13],[52,12,50,14,"hasReachedTarget"],[52,28,50,30],[52,31,50,33,"_$$_REQUIRE"],[52,42,50,33],[52,43,50,33,"_dependencyMap"],[52,57,50,33],[52,100,50,50,"hasReachedTarget"],[52,116,50,66],[52,117,50,67,"from"],[52,121,50,71],[52,123,50,73,"to"],[52,125,50,75],[52,127,50,77,"state"],[52,132,50,82],[52,133,50,83,"current"],[52,140,50,90],[52,141,50,91],[53,6,51,8],[53,13,51,15,"state"],[53,18,51,20],[54,4,52,4],[54,5,52,5],[55,2,53,0],[55,3,53,1],[56,2,55,0,"exports"],[56,9,55,7],[56,10,55,8,"spring"],[56,16,55,14],[56,19,55,17,"spring"],[56,25,55,23],[57,0,55,24],[57,3]],"functionMap":{"names":["<global>","spring","resolveSpring","<anonymous>"],"mappings":"AAA;eCQ;wBCkB;6DDK;wBCI;SDI;WEE;KFU;CDC"}},"type":"js/module"}]}