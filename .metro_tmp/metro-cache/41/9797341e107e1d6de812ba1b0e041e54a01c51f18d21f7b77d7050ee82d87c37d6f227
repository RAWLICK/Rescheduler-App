{"dependencies":[{"name":"tslib","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":12,"index":91},"end":{"line":5,"column":28,"index":107}}],"key":"j/7buxWl8Yo4DN5u39IwETSJJyw="}},{"name":"./info.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":11,"index":167},"end":{"line":7,"column":35,"index":191}}],"key":"NwFHoaUGM4yMjzUjxRL3kiQ5kTU="}},{"name":"./on-scroll-handler.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":22,"index":215},"end":{"line":8,"column":59,"index":252}}],"key":"3/HN6D9LSlBRSazn1qPClAnAMCU="}},{"name":"../resize/index.cjs.js","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":12,"index":121},"end":{"line":6,"column":45,"index":154}}],"key":"hBOLcmd1QwXLd3K7bIAZHc4luXs="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var scrollListeners = new WeakMap();\n  var resizeListeners = new WeakMap();\n  var onScrollHandlers = new WeakMap();\n  var getEventTarget = function getEventTarget(element) {\n    return element === document.documentElement ? window : element;\n  };\n  function scroll(onScroll) {\n    var _a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _a$container = _a.container,\n      container = _a$container === void 0 ? document.documentElement : _a$container,\n      options = _$$_REQUIRE(_dependencyMap[0], \"tslib\").__rest(_a, [\"container\"]);\n    var containerHandlers = onScrollHandlers.get(container);\n    /**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */\n    if (!containerHandlers) {\n      containerHandlers = new Set();\n      onScrollHandlers.set(container, containerHandlers);\n    }\n    /**\n     * Create a new onScroll handler for the provided callback.\n     */\n    var info$1 = _$$_REQUIRE(_dependencyMap[1], \"./info.cjs.js\").createScrollInfo();\n    var containerHandler = _$$_REQUIRE(_dependencyMap[2], \"./on-scroll-handler.cjs.js\").createOnScrollHandler(container, onScroll, info$1, options);\n    containerHandlers.add(containerHandler);\n    /**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */\n    if (!scrollListeners.has(container)) {\n      var _listener = function _listener() {\n        var time = performance.now();\n        for (var handler of containerHandlers) handler.measure();\n        for (var _handler of containerHandlers) _handler.update(time);\n        for (var _handler2 of containerHandlers) _handler2.notify();\n      };\n      scrollListeners.set(container, _listener);\n      var target = getEventTarget(container);\n      window.addEventListener(\"resize\", _listener, {\n        passive: true\n      });\n      if (container !== document.documentElement) {\n        resizeListeners.set(container, _$$_REQUIRE(_dependencyMap[3], \"../resize/index.cjs.js\").resize(container, _listener));\n      }\n      target.addEventListener(\"scroll\", _listener, {\n        passive: true\n      });\n    }\n    var listener = scrollListeners.get(container);\n    var onLoadProcesss = requestAnimationFrame(listener);\n    return function () {\n      var _a;\n      if (typeof onScroll !== \"function\") onScroll.stop();\n      cancelAnimationFrame(onLoadProcesss);\n      /**\n       * Check if we even have any handlers for this container.\n       */\n      var containerHandlers = onScrollHandlers.get(container);\n      if (!containerHandlers) return;\n      containerHandlers.delete(containerHandler);\n      if (containerHandlers.size) return;\n      /**\n       * If no more handlers, remove the scroll listener too.\n       */\n      var listener = scrollListeners.get(container);\n      scrollListeners.delete(container);\n      if (listener) {\n        getEventTarget(container).removeEventListener(\"scroll\", listener);\n        (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n        window.removeEventListener(\"resize\", listener);\n      }\n    };\n  }\n  exports.scroll = scroll;\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,3,47,"value"],[5,9,3,52],[5,11,3,54],[6,2,3,59],[6,3,3,60],[6,4,3,61],[7,2,10,0],[7,6,10,6,"scrollListeners"],[7,21,10,21],[7,24,10,24],[7,28,10,28,"WeakMap"],[7,35,10,35],[7,36,10,36],[7,37,10,37],[8,2,11,0],[8,6,11,6,"resizeListeners"],[8,21,11,21],[8,24,11,24],[8,28,11,28,"WeakMap"],[8,35,11,35],[8,36,11,36],[8,37,11,37],[9,2,12,0],[9,6,12,6,"onScrollHandlers"],[9,22,12,22],[9,25,12,25],[9,29,12,29,"WeakMap"],[9,36,12,36],[9,37,12,37],[9,38,12,38],[10,2,13,0],[10,6,13,6,"getEventTarget"],[10,20,13,20],[10,23,13,23],[10,32,13,6,"getEventTarget"],[10,46,13,20,"getEventTarget"],[10,47,13,24,"element"],[10,54,13,31],[11,4,13,31],[11,11,13,36,"element"],[11,18,13,43],[11,23,13,48,"document"],[11,31,13,56],[11,32,13,57,"documentElement"],[11,47,13,72],[11,50,13,75,"window"],[11,56,13,81],[11,59,13,84,"element"],[11,66,13,91],[12,2,13,91],[13,2,14,0],[13,11,14,9,"scroll"],[13,17,14,15,"scroll"],[13,18,14,16,"onScroll"],[13,26,14,24],[13,28,14,35],[14,4,14,35],[14,8,14,26,"_a"],[14,10,14,28],[14,13,14,28,"arguments"],[14,22,14,28],[14,23,14,28,"length"],[14,29,14,28],[14,37,14,28,"arguments"],[14,46,14,28],[14,54,14,28,"undefined"],[14,63,14,28],[14,66,14,28,"arguments"],[14,75,14,28],[14,81,14,31],[14,82,14,32],[14,83,14,33],[15,4,15,4],[15,8,15,4,"_a$container"],[15,20,15,4],[15,23,15,51,"_a"],[15,25,15,53],[15,26,15,10,"container"],[15,35,15,19],[16,6,15,10,"container"],[16,15,15,19],[16,18,15,19,"_a$container"],[16,30,15,19],[16,44,15,22,"document"],[16,52,15,30],[16,53,15,31,"documentElement"],[16,68,15,46],[16,71,15,46,"_a$container"],[16,83,15,46],[17,6,15,55,"options"],[17,13,15,62],[17,16,15,65,"_$$_REQUIRE"],[17,27,15,65],[17,28,15,65,"_dependencyMap"],[17,42,15,65],[17,56,15,71,"__rest"],[17,62,15,77],[17,63,15,78,"_a"],[17,65,15,80],[17,67,15,82],[17,68,15,83],[17,79,15,94],[17,80,15,95],[17,81,15,96],[18,4,16,4],[18,8,16,8,"containerHandlers"],[18,25,16,25],[18,28,16,28,"onScrollHandlers"],[18,44,16,44],[18,45,16,45,"get"],[18,48,16,48],[18,49,16,49,"container"],[18,58,16,58],[18,59,16,59],[19,4,17,4],[20,0,18,0],[21,0,19,0],[22,0,20,0],[23,4,21,4],[23,8,21,8],[23,9,21,9,"containerHandlers"],[23,26,21,26],[23,28,21,28],[24,6,22,8,"containerHandlers"],[24,23,22,25],[24,26,22,28],[24,30,22,32,"Set"],[24,33,22,35],[24,34,22,36],[24,35,22,37],[25,6,23,8,"onScrollHandlers"],[25,22,23,24],[25,23,23,25,"set"],[25,26,23,28],[25,27,23,29,"container"],[25,36,23,38],[25,38,23,40,"containerHandlers"],[25,55,23,57],[25,56,23,58],[26,4,24,4],[27,4,25,4],[28,0,26,0],[29,0,27,0],[30,4,28,4],[30,8,28,10,"info$1"],[30,14,28,16],[30,17,28,19,"_$$_REQUIRE"],[30,28,28,19],[30,29,28,19,"_dependencyMap"],[30,43,28,19],[30,65,28,24,"createScrollInfo"],[30,81,28,40],[30,82,28,41],[30,83,28,42],[31,4,29,4],[31,8,29,10,"containerHandler"],[31,24,29,26],[31,27,29,29,"_$$_REQUIRE"],[31,38,29,29],[31,39,29,29,"_dependencyMap"],[31,53,29,29],[31,88,29,45,"createOnScrollHandler"],[31,109,29,66],[31,110,29,67,"container"],[31,119,29,76],[31,121,29,78,"onScroll"],[31,129,29,86],[31,131,29,88,"info$1"],[31,137,29,94],[31,139,29,96,"options"],[31,146,29,103],[31,147,29,104],[32,4,30,4,"containerHandlers"],[32,21,30,21],[32,22,30,22,"add"],[32,25,30,25],[32,26,30,26,"containerHandler"],[32,42,30,42],[32,43,30,43],[33,4,31,4],[34,0,32,0],[35,0,33,0],[36,0,34,0],[37,4,35,4],[37,8,35,8],[37,9,35,9,"scrollListeners"],[37,24,35,24],[37,25,35,25,"has"],[37,28,35,28],[37,29,35,29,"container"],[37,38,35,38],[37,39,35,39],[37,41,35,41],[38,6,36,8],[38,10,36,14,"listener"],[38,19,36,22],[38,22,36,25],[38,31,36,14,"listener"],[38,40,36,22,"listener"],[38,41,36,22],[38,43,36,31],[39,8,37,12],[39,12,37,18,"time"],[39,16,37,22],[39,19,37,25,"performance"],[39,30,37,36],[39,31,37,37,"now"],[39,34,37,40],[39,35,37,41],[39,36,37,42],[40,8,38,12],[40,13,38,17],[40,17,38,23,"handler"],[40,24,38,30],[40,28,38,34,"containerHandlers"],[40,45,38,51],[40,47,39,16,"handler"],[40,54,39,23],[40,55,39,24,"measure"],[40,62,39,31],[40,63,39,32],[40,64,39,33],[41,8,40,12],[41,13,40,17],[41,17,40,23,"handler"],[41,25,40,30],[41,29,40,34,"containerHandlers"],[41,46,40,51],[41,48,41,16,"handler"],[41,56,41,23],[41,57,41,24,"update"],[41,63,41,30],[41,64,41,31,"time"],[41,68,41,35],[41,69,41,36],[42,8,42,12],[42,13,42,17],[42,17,42,23,"handler"],[42,26,42,30],[42,30,42,34,"containerHandlers"],[42,47,42,51],[42,49,43,16,"handler"],[42,58,43,23],[42,59,43,24,"notify"],[42,65,43,30],[42,66,43,31],[42,67,43,32],[43,6,44,8],[43,7,44,9],[44,6,45,8,"scrollListeners"],[44,21,45,23],[44,22,45,24,"set"],[44,25,45,27],[44,26,45,28,"container"],[44,35,45,37],[44,37,45,39,"listener"],[44,46,45,47],[44,47,45,48],[45,6,46,8],[45,10,46,14,"target"],[45,16,46,20],[45,19,46,23,"getEventTarget"],[45,33,46,37],[45,34,46,38,"container"],[45,43,46,47],[45,44,46,48],[46,6,47,8,"window"],[46,12,47,14],[46,13,47,15,"addEventListener"],[46,29,47,31],[46,30,47,32],[46,38,47,40],[46,40,47,42,"listener"],[46,49,47,50],[46,51,47,52],[47,8,47,54,"passive"],[47,15,47,61],[47,17,47,63],[48,6,47,68],[48,7,47,69],[48,8,47,70],[49,6,48,8],[49,10,48,12,"container"],[49,19,48,21],[49,24,48,26,"document"],[49,32,48,34],[49,33,48,35,"documentElement"],[49,48,48,50],[49,50,48,52],[50,8,49,12,"resizeListeners"],[50,23,49,27],[50,24,49,28,"set"],[50,27,49,31],[50,28,49,32,"container"],[50,37,49,41],[50,39,49,43,"_$$_REQUIRE"],[50,50,49,43],[50,51,49,43,"_dependencyMap"],[50,65,49,43],[50,96,49,49,"resize"],[50,102,49,55],[50,103,49,56,"container"],[50,112,49,65],[50,114,49,67,"listener"],[50,123,49,75],[50,124,49,76],[50,125,49,77],[51,6,50,8],[52,6,51,8,"target"],[52,12,51,14],[52,13,51,15,"addEventListener"],[52,29,51,31],[52,30,51,32],[52,38,51,40],[52,40,51,42,"listener"],[52,49,51,50],[52,51,51,52],[53,8,51,54,"passive"],[53,15,51,61],[53,17,51,63],[54,6,51,68],[54,7,51,69],[54,8,51,70],[55,4,52,4],[56,4,53,4],[56,8,53,10,"listener"],[56,16,53,18],[56,19,53,21,"scrollListeners"],[56,34,53,36],[56,35,53,37,"get"],[56,38,53,40],[56,39,53,41,"container"],[56,48,53,50],[56,49,53,51],[57,4,54,4],[57,8,54,10,"onLoadProcesss"],[57,22,54,24],[57,25,54,27,"requestAnimationFrame"],[57,46,54,48],[57,47,54,49,"listener"],[57,55,54,57],[57,56,54,58],[58,4,55,4],[58,11,55,11],[58,23,55,17],[59,6,56,8],[59,10,56,12,"_a"],[59,12,56,14],[60,6,57,8],[60,10,57,12],[60,17,57,19,"onScroll"],[60,25,57,27],[60,30,57,32],[60,40,57,42],[60,42,58,12,"onScroll"],[60,50,58,20],[60,51,58,21,"stop"],[60,55,58,25],[60,56,58,26],[60,57,58,27],[61,6,59,8,"cancelAnimationFrame"],[61,26,59,28],[61,27,59,29,"onLoadProcesss"],[61,41,59,43],[61,42,59,44],[62,6,60,8],[63,0,61,0],[64,0,62,0],[65,6,63,8],[65,10,63,14,"containerHandlers"],[65,27,63,31],[65,30,63,34,"onScrollHandlers"],[65,46,63,50],[65,47,63,51,"get"],[65,50,63,54],[65,51,63,55,"container"],[65,60,63,64],[65,61,63,65],[66,6,64,8],[66,10,64,12],[66,11,64,13,"containerHandlers"],[66,28,64,30],[66,30,65,12],[67,6,66,8,"containerHandlers"],[67,23,66,25],[67,24,66,26,"delete"],[67,30,66,32],[67,31,66,33,"containerHandler"],[67,47,66,49],[67,48,66,50],[68,6,67,8],[68,10,67,12,"containerHandlers"],[68,27,67,29],[68,28,67,30,"size"],[68,32,67,34],[68,34,68,12],[69,6,69,8],[70,0,70,0],[71,0,71,0],[72,6,72,8],[72,10,72,14,"listener"],[72,18,72,22],[72,21,72,25,"scrollListeners"],[72,36,72,40],[72,37,72,41,"get"],[72,40,72,44],[72,41,72,45,"container"],[72,50,72,54],[72,51,72,55],[73,6,73,8,"scrollListeners"],[73,21,73,23],[73,22,73,24,"delete"],[73,28,73,30],[73,29,73,31,"container"],[73,38,73,40],[73,39,73,41],[74,6,74,8],[74,10,74,12,"listener"],[74,18,74,20],[74,20,74,22],[75,8,75,12,"getEventTarget"],[75,22,75,26],[75,23,75,27,"container"],[75,32,75,36],[75,33,75,37],[75,34,75,38,"removeEventListener"],[75,53,75,57],[75,54,75,58],[75,62,75,66],[75,64,75,68,"listener"],[75,72,75,76],[75,73,75,77],[76,8,76,12],[76,9,76,13,"_a"],[76,11,76,15],[76,14,76,18,"resizeListeners"],[76,29,76,33],[76,30,76,34,"get"],[76,33,76,37],[76,34,76,38,"container"],[76,43,76,47],[76,44,76,48],[76,50,76,54],[76,54,76,58],[76,58,76,62,"_a"],[76,60,76,64],[76,65,76,69],[76,70,76,74],[76,71,76,75],[76,74,76,78],[76,79,76,83],[76,80,76,84],[76,83,76,87,"_a"],[76,85,76,89],[76,86,76,90],[76,87,76,91],[77,8,77,12,"window"],[77,14,77,18],[77,15,77,19,"removeEventListener"],[77,34,77,38],[77,35,77,39],[77,43,77,47],[77,45,77,49,"listener"],[77,53,77,57],[77,54,77,58],[78,6,78,8],[79,4,79,4],[79,5,79,5],[80,2,80,0],[81,2,82,0,"exports"],[81,9,82,7],[81,10,82,8,"scroll"],[81,16,82,14],[81,19,82,17,"scroll"],[81,25,82,23],[82,0,82,24],[82,3]],"functionMap":{"names":["<global>","getEventTarget","scroll","listener","<anonymous>"],"mappings":"AAA;uBCY,oED;AEC;yBCsB;SDQ;WEW;KFwB;CFC"}},"type":"js/module"}]}